## TCP/IP四层协议模型
### 四层网络模型

![计算机网络模型](https://user-gold-cdn.xitu.io/2020/7/30/1739d1d409e3174b?w=1033&h=400&f=png&s=61328)

#### 什么是四层模型

第一层：应用层，主要有负责web浏览器的HTTP协议， 文件传输的FTP协议，负责电子邮件的SMTP协议，负责域名系统的DNS等。

第二层：传输层，主要是有**可靠传输**的TCP协议，特别**高效**的UDP协议。主要负责传输应用层的数据包。

第三层：网络层，主要是IP协议。主要负责寻址（找到目标设备的位置）

第四层：数据链路层，主要是负责转换数字信号和物理二进制信号。

#### 为什么是四层模型

>通过四层模型可以将应用层的具体数据传输给对应设备

例子：

我们需要发送一个**index.html**。

两台电脑在应用层都使用HTTP协议（即都使用浏览器）。

在传输层，TCP协议会将HTTP协议发送的数据看作一个数据包，并在这个数据包前面加上TCP包的一部分信息（部首）

在网络层，IP协议会将TCP协议要发送的数据看作一个数据包，同样的在这个数据包前端加上IP协议的部首

在数据链路层，对应的协议也会在IP数据包前端加上以太网的部首。
![各层级封包](https://user-gold-cdn.xitu.io/2020/7/30/1739d1d40b30cd30?w=560&h=503&f=png&s=53648)

源设备和目标设备通过网线连接，就可以通过物理层的二进制传输数据。

数据链路层，会使用对应的协议找到物理层的二进制数据，解码得到以太网的部首信息和对应的IP数据包，再将IP数据包传给上层的网络层。

数据链路层>网络层>传输层>应用层，一层层的解码，最后就可以在浏览器中得到目标设备传送过来的**index.html**。

![数据在网络中传输](https://user-gold-cdn.xitu.io/2020/7/30/1739d1d409d2edf0?w=772&h=776&f=png&s=167495)



### TCP/IP协议族
从字面意义上来讲，TCP/IP是指**传输层**的TCP协议和**网络层**的IP协议。实际上，TCP/IP只是利用 IP 进行通信时所必须用到的协议群的统称。即他们都是基于IP协议，于是拿出最常用的TCP协议和IP协议组团，代表整个**协议族**出道。

具体来说，在网络层是IP/ICMP协议、在传输层是TCP/UDP协议、在应用层是SMTP、FTP、以及 HTTP 等。他们都属于 TCP/IP 协议。

他们与 TCP 或 IP 的关系紧密，是实现互联网必不可少的组成部分。

所以TCP/IP 一词其实是泛指这些协议，TCP/IP 也被称为网际协议群。互联网进行通信时，需要相应的网络协议，TCP/IP 原本就是为使用互联网而开发制定的协议族。因此，互联网的协议就是 TCP/IP，TCP/IP 就是互联网的协议。

![TCP/IP协议族](https://user-gold-cdn.xitu.io/2020/7/30/1739d1d40b970ff0?w=768&h=528&f=png&s=74140)

## 总结
1. TCP/IP划分了四层网络模型
    - 应用层：负责各种不同应用之间的协议，如浏览器的**HTTP协议**、电子邮件的**STMP协议**等。
    - 传输层：负责**可靠传输**的**TCP协议**、**高效传输**的**UDP协议**
    - 网络层：负责寻址（准确找到对方设备）的**IP协议**
    - 数据链路层：负责将数字信号在物理通道（网线）中准确传输
    
2. TCP/IP是指为互联网而开发制定的协议族，并非仅单指TCP协议和IP协议。

3. 四层网络协议的作用
  
    - 发送端是由上至下，把上层来的数据在头部加上各层协议的数据（部首）再下发给下层。
    
    - 接受端则由下而上，把从下层接受到的数据进行解密和去掉头部的部首后再发送给上层。
    
    - 层层加密和解密后，应用层最终拿到了需要的数据。